---
// Mixed media subpage component - supports both videos and images
const mediaItems = [
  { 
    type: "video",
    id: "PHxJKbK3a14", 
    x: 250, 
    y: 75, 
    scale: 1 
  },
  { 
    type: "video",
    id: "vh77Yvnk178", 
    x: 900, 
    y: 250, 
    scale: 1.2 
  },

  { 
    type: "video",
    id: "WiFsMZuCX7U", 
    x: 150, 
    y: 425, 
    scale: 1.4 
  },
  { 
    type: "video",
    id: "n4t7pJDpXeU", 
    x: 750, 
    y: 600, 
    scale: 1.1 
  },
  { 
    type: "image",
    src: "/portfoliosite/imagenotfound.jpeg",
    alt: "Sample Image 3",
    x: 750, 
    y: 50, 
    scale: 0.7
  },
  { 
    type: "image",
    src: "/portfoliosite/imagenotfound.jpeg",
    alt: "Sample Image 3",
    x: 1250, 
    y: 650, 
    scale: .755
  },  
];

// Base dimensions for 4:3 aspect ratio
const baseWidth = 320;
const baseHeight = 240;
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Media Gallery</title>
    <link href="https://fonts.googleapis.com/css2?family=Futura:wght@400&display=swap" rel="stylesheet" />
    <style>
      @font-face {
        font-family: 'Futura';
        src: url('https://fonts.googleapis.com/css2?family=Futura:wght@400&display=swap');
      }
      
      body {
        margin: 0;
        padding: 0;
        background-color: black;
        font-family: 'Futura', 'Trebuchet MS', Arial, sans-serif;
        min-height: 100vh;
        position: relative;
        overflow-x: auto;
      }

      .return-link {
        position: absolute;
        top: 20px;
        left: 20px;
        color: red;
        font-size: 16px;
        font-family: 'Futura', 'Trebuchet MS', Arial, sans-serif;
        text-decoration: none;
        cursor: pointer;
        z-index: 1000;
      }

      .return-link:hover {
        text-decoration: underline;
      }

      .media-container {
        position: relative;
        width: 100%;
        height: 1200px;
      }

      .media-embed {
        position: absolute;
        border-radius: 4px;
        box-shadow: 0 4px 8px rgba(255, 255, 255, 0.1);
      }

      .media-embed iframe {
        width: 100%;
        height: 100%;
        border: none;
        border-radius: 4px;
      }

      .media-embed img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 4px;
        display: block;
      }
    </style>
  </head>
  
  <body>
    <a href="/" class="return-link" onclick="history.back(); return false;">return</a>
    
    <div class="media-container">
      {mediaItems.map((item) => (
        <div 
          class="media-embed" 
          style={`
            left: ${item.x}px; 
            top: ${item.y}px; 
            width: ${baseWidth * item.scale}px; 
            height: ${baseHeight * item.scale}px;
          `}
        >
          {item.type === "video" ? (
            <iframe
              src={`https://www.youtube.com/embed/${item.id}?enablejsapi=1`}
              title={`YouTube video ${item.id}`}
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen
              loading="lazy"
            ></iframe>
          ) : (
            <img
              src={item.src}
              alt={item.alt}
              loading="lazy"
              onerror="this.style.border='2px solid red'; this.alt='Image failed to load: ' + this.src;"
            />
          )}
        </div>
      ))}
    </div>

    <script>
      // YouTube API integration for enhanced functionality
      function onYouTubeIframeAPIReady() {
        console.log('YouTube API ready');
      }

      // Load YouTube API
      const tag = document.createElement('script');
      tag.src = 'https://www.youtube.com/iframe_api';
      const firstScriptTag = document.getElementsByTagName('script')[0];
      if (firstScriptTag && firstScriptTag.parentNode) {
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
      }

      // Handle return link - wait for DOM to be ready
      document.addEventListener('DOMContentLoaded', function() {
        const returnLink = document.querySelector('.return-link');
        if (returnLink) {
          returnLink.addEventListener('click', function(e) {
            e.preventDefault();
            if (window.history.length > 1) {
              window.history.back();
            } else {
              window.location.href = '/';
            }
          });
        }
      });
    </script>
  </body>
</html>